자바스크립트의 동작 방식을 이해하려면 실행 컨텍스트를 알아야 한다. **실행 컨텍스트**라는 개념이 자바스크립트의 동적 언어로서의 성격이 가장 잘 드러나는 부분이기 때문이다. 자, 그럼 실행 컨텍스트가 뭘까?

> **실행 컨텍스트는 실행할 코드에 제공할 환경 정보들을 모아놓은 객체다.**

우리가 코드를 작성했을 때 자바스크립트 엔진은 그 코드를 2개의 과정, 즉 "코드의 평가"와 "코드의 실행" 과정으로 나누어 처리한다. 그리고 이 코드의 평가 과정에서 오늘의 주제인 실행 컨텍스트가 생성된다.

### 🔎 들어가기 전에

실행 컨텍스트를 이해하기 위해 먼저 알고 있어야 할 개념들을 간단히 짚고 가겠다.

#### 소스코드의 타입

자바스크립트의 표준 규격인 ECMA script는 코드를 4가지 타입으로 구분한다. 이 4가지 타입의 소스코드는 실행 컨텍스트를 생성하는데, 소스코드를 타입에 따라 구분하는 이유는 소스코드의 타입에 따라 실행 컨텍스트를 생성하는 과정과 관리 내용이 다르기 때문이다.

| 소스코드의 타입 | 설명                                                                                                      |
| --------------- | --------------------------------------------------------------------------------------------------------- |
| 전역 코드       | 전역에 존재하는 소스코드를 말한다. 전역에 정의된 함수, 클래스 등의 내부 코드는 포함되지 않는다.           |
| 함수 코드       | 함수 내부에 존재하는 소스코드를 말한다. 함수 내부에 중첩된 함수, 클래스 등의 내부 코드는 포함되지 않는다. |
| eval 코드       | 빌트인 전역 함수인 eval 함수에 인수로 전달되어 실행되는 소스코드를 말한다.                                |
| 모듈 코드       | 모듈 내부에 존재하는 소스코드를 말한다. 모듈 내부의 함수, 클래스 등의 내부 코드는 포함되지 않는다.        |

출처: 딥다이브 자바스크립트 359p

#### 스택과 큐

스택은 출입구가 하나뿐인 깊은 우물 같은 데이터 구조다.

![](https://velog.velcdn.com/images/perfumellim/post/0cc5b0d4-10a8-43d4-ba56-432c6b4d00ad/image.png)

이미지 출처: https://velog.io/@sbinha/%EC%8A%A4%ED%83%9D-%ED%81%90

비어있는 스택에 순서대로 데이터 a,b,c,d를 저장했다면, 꺼낼 때는 반대로 d,c,b,a의 순서로 꺼낼 수밖에 없다.

반면 큐는 양쪽이 모두 열려있는 파이프 같은 구조다. 보통 한쪽은 입력만, 다른 한쪽은 출력만을 담당하는 구조이기 때문에 a,b,c 순서대로 저장했다면 꺼낼 때도 a,b,c 순서로 꺼낼 수밖에 없다.

![](https://velog.velcdn.com/images/perfumellim/post/95e5237d-361e-4d9a-828e-9f66cf4fb807/image.png)

이미지 출처: https://velog.io/@sbinha/%EC%8A%A4%ED%83%9D-%ED%81%90

### 🔹 실행 컨텍스트의 생성 및 역할

자바스크립트 엔진은 우리가 작성한 코드를 실행하기 전에 평가 과정을 거치며 코드를 실행하기 위한 준비를 한다. 그리고 이 평가 과정에서 실행 컨텍스트를 생성한다. 또한 함수, 변수 등의 선언문만 먼저 실행하여 생성된 변수나 함수 식별자를 키로 실행 컨텍스트가 관리하는 스코프에 등록한다.

소스코드 평가 과정이 끝나면 비로소 선언문을 제외한 소스코드가 순차적으로 실행되기 시작한다. 즉, 런타임이 시작된다.

앞서 실행 컨텍스트는 **실행할 코드에 제공할 환경 정보들을 모아놓은 객체**라는 말을 했다. 자바스크립트는 동일한 환경에 있는 코드들을 실행할 때 필요한 환경 정보들을 모아 컨텍스트를 구성하고, 이를 콜 스택(call stack)에 쌓아올렸다가, 가장 위에 쌓여있는 컨텍스트와 관련 있는 코드들을 실행하는 식으로 전체 코드의 환경과 순서를 보장한다. 즉 실행 컨텍스트는 식별자(변수, 함수, 클래스 등의 이름)를 등록하고 관리하는 스코프와 코드 실행 순서 관리를 구현한 내부 매커니즘으로, 모든 코드는 실행 컨텍스트를 통해 실행되고 관리된다.
